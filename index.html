<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Festival Wishes — Cards & Videos</title>
<style>
:root{
  --accent:#ff6b35;
  --muted:#6b7280;
  --bg:#fffaf0;
  --card-bg:#fff;
  --radius:12px;
  --shadow:0 8px 24px rgba(17,17,17,0.08);
}
body{margin:0;font-family:Inter,sans-serif;background:var(--bg);color:#111;}
header{display:flex;justify-content:center;align-items:center;padding:14px 20px;background:var(--accent);color:#fff;font-weight:700;font-size:22px;text-shadow:0 0 6px #fff;margin-bottom:20px;}
.container{max-width:1100px;margin:0 auto;padding:0 16px}
.festival-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:14px}
.festival-card,.video-card,.card-item{background:var(--card-bg);border-radius:var(--radius);padding:10px;box-shadow:var(--shadow);text-align:center}
.video-card video{width:100%;border-radius:8px}
.card-item img{width:100%;border-radius:8px}
.card-actions{display:flex;gap:8px;margin-top:6px;justify-content:center}
.btn{background:var(--accent);color:#fff;padding:8px 12px;border:none;border-radius:10px;cursor:pointer;font-weight:600}
.btn.alt{background:#fff;color:#111;border:1px solid rgba(0,0,0,0.1)}
#backBtn{margin-bottom:12px;}
</style>
</head>
<body>
<header>Festival Wishes</header>
<main class="container">
<section id="homePage">
<div id="festivals" class="festival-grid"></div>
</section>
<section id="festivalPage" style="display:none">
<button id="backBtn" class="btn alt" onclick="goHome()">← Back to Home</button>
<h2 id="festivalTitle"></h2>
<div id="festivalDesc" style="margin-bottom:12px;color:var(--muted)"></div>
<h3>Videos</h3>
<div id="videoGrid" class="festival-grid"></div>
<h3>Cards</h3>
<div id="cardGrid" class="festival-grid"></div>
</section>
</main>

<script>
const SITE_URL='https://festivalwishes.github.io/';

// Festivals
const FESTIVALS={
  'Diwali': {id:'diwali', description:'Festival of Lights'},
  'Holi': {id:'holi', description:'Festival of Colors'},
  'Christmas': {id:'christmas', description:'Christmas Celebrations'},
  'New Year': {id:'newyear', description:'New Year Wishes'},
  'Raksha Bandhan': {id:'raksha', description:'Celebrate Siblings'},
  'Independence Day': {id:'independence', description:'National Day'},
  'Navratri': {id:'navratri', description:'Navratri Festival'},
  'Eid': {id:'eid', description:'Eid Greetings'},
  'Ganesh Chaturthi': {id:'ganesh', description:'Ganesh Festival'},
  'Baisakhi': {id:'baisakhi', description:'Harvest Festival'},
  'Makar Sankranti': {id:'makar', description:'Makar Sankranti Festival'}
};

// Render homepage
function renderFestivals(){
  const festivalsEl=document.getElementById('festivals');
  festivalsEl.innerHTML='';
  Object.keys(FESTIVALS).forEach(name=>{
    const f=FESTIVALS[name];
    const card=document.createElement('div'); card.className='festival-card';
    card.innerHTML=`<h3>${name}</h3><p>${f.description}</p>
    <button class='btn' onclick="openFestival('${name}')">Open</button>`;
    festivalsEl.appendChild(card);
  });
}

// Open festival
async function openFestival(name){
  const f=FESTIVALS[name];
  document.getElementById('homePage').style.display='none';
  document.getElementById('festivalPage').style.display='block';
  document.getElementById('festivalTitle').textContent=name;
  document.getElementById('festivalDesc').textContent=f.description;

  // Fetch media list
  const media = await fetchMedia(f.id);

  // Videos
  const videoGrid=document.getElementById('videoGrid'); videoGrid.innerHTML='';
  media.videos.forEach(src=>{
    const vcard=document.createElement('div'); vcard.className='video-card';
    vcard.innerHTML=`<video controls src='media/${f.id}/${src}'></video>
    <div class='card-actions'><button class='btn' onclick="downloadFile('media/${f.id}/${src}')">Download</button></div>`;
    videoGrid.appendChild(vcard);
  });

  // Cards
  const cardGrid=document.getElementById('cardGrid'); cardGrid.innerHTML='';
  media.cards.forEach(src=>{
    const c=document.createElement('div'); c.className='card-item';
    c.innerHTML=`<img src='media/${f.id}/${src}' alt='Card'><div class='card-actions'><button class='btn' onclick="downloadFile('media/${f.id}/${src}')">Download</button></div>`;
    cardGrid.appendChild(c);
  });
}

// Back home
function goHome(){
  document.getElementById('festivalPage').style.display='none';
  document.getElementById('homePage').style.display='block';
}

// Download
function downloadFile(url){
  const a=document.createElement('a'); a.href=url; a.download=url.split('/').pop(); a.click();
}

// Auto fetch all files in festival folder
async function fetchMedia(festId){
  // This will work on GitHub Pages only if the folder listing is allowed.
  // Otherwise, you need to manually specify file names as in previous code.
  try{
    const res = await fetch(`${SITE_URL}media/${festId}/`);
    const text = await res.text();
    const parser = new DOMParser();
    const doc = parser.parseFromString(text,'text/html');
    const links = Array.from(doc.querySelectorAll('a')).map(a=>a.getAttribute('href'));
    const cards = links.filter(f=>f.match(/\.(jpg|jpeg|png|gif)$/i));
    const videos = links.filter(f=>f.match(/\.(mp4|webm|ogg)$/i));
    return {cards,videos};
  }catch(e){
    return {cards:[],videos:[]};
  }
}

renderFestivals();
</script>
</body>
</html>
